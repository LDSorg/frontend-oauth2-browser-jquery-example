<script>
  var re = /\/(auth|providers)\/([^\/]+)\/callback/
    , href = window.location.href
    , m
    , name
    ;

  m = href.match(re);

  if (!m) {
    window.alert("callback URLs should be in the format /auth/{{strategy}}/callback");
  }

  name = m[1]

  setTimeout(function () {
    window.opener.completeLogin(name, window.location.href);
  }, 100);

  // iOS Webview (namely Chrome) workaround
  setTimeout(function () {
    window.open('', '_self', '');
    window.close();
  }, 300);

  localStorage.setItem(name + 'Status', window.location.href);
</script>

<p>Redirecting... </p>

<a href="javascript:window.opener.completeLogin(name, window.location.href);">close</a>
